function filterResults(n,t){var e=[];if(0===n.length)return e;var r=t.match(/^\s*(\w+)\s*$/);if(null!=r){var i=n.filter(function(n){return n.elementType==r[1]});null!=i&&i.length>0&&(e=e.concat(i))}else!function(){var i=!1;r=t.match(/\s*(\w+)\s*\[\s*(\w+)\s*([>=<])\s*['"](\S+)['"]\s*\]\s*/),(null==r||r.length<5)&&(r=t.match(/\s*(\w+)\s*\[\s*(\w+)\s*([>=<])\s*(\d+(\.\d+)?)\s*\]\s*/),i=!0),null!=r&&r.length>=5&&!function(){var t=r[1],s=r[2],u=r[3],l=r[4],o=n.filter(function(n){if(n.elementType!=t)return!1;var e=n[s];return!0===i&&(e=parseInt(e)),"="==u?e==l:">"==u?e>l:"<"==u?l>e:"<="==u?l>=e:">="==u?e>=l:"!="==u&&e!=l});null!=o&&o.length>0&&(e=e.concat(o))}()}();return e}function invokeProperty(n){if(n.find=function(n){return find.call(this,n)},events.forEach(function(t){n[t]=function(n){for(var e=0;e<this.length;e++)this[e][t](n);return this}}),n.length>0){var t=n[0],e=function(e){var r=t[e];"function"==typeof r&&!function(t){n[e]=function(){for(var r=[],i=0;i<n.length;i++)r.push(t.apply(n[i],arguments));return e}}(r)};for(var r in t)e(r)}return n.attr=function(n,t){if(null!=n&&null!=t)for(var e=0;e<this.length;e++)this[e][n]=t;else{if(null!=n&&"string"==typeof n){for(var r=[],i=0;i<this.length;i++)r.push(this[i][n]);return r}if(null!=n)for(var s=0;s<this.length;s++)for(var u in n)this[s][u]=n[u]}return this},n}function find(n){var t=[],e=[];this instanceof Stage?(t=this.childs,e=e.concat(t)):this instanceof Scene?t=[this]:e=this,t.forEach(function(n){e=e.concat(n.childs)});var r=null;return r="function"==typeof n?e.filter(n):filterResults(e,n),r=invokeProperty(r)}var Stage=require("./_stage"),Scene=require("./_scene"),events="click,mousedown,mouseup,mouseover,mouseout,mousedrag,keydown,keyup".split(",");module.exports=find;