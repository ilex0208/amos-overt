var _cons=require("./../constants"),Bd=_cons.Bd,UserAgent=require("./_userAgent"),_touch=require("./_touch"),_html={preventDefault:function(e){Bd.KEEP_DEFAULT_FUNCTION(e)||(e.preventDefault?e.preventDefault():e.preventManipulation?e.preventManipulation():e.returnValue=!1)},insertAfter:function(e,t){return t?t.parentNode.insertBefore(e,t.nextSibling):e.parentNode.insertBefore(e,e.parentNode.firstChild),e},forEach:function(e,t,n){if(_html.isVisible(e)){for(var r=e.childNodes.length,o=0;o<r;o++)_html.forEach(e.childNodes[o],t,n);n?t.call(n,e):t(e)}},setVisible:function(e,t){e.style.display=t?"block":"none"},isVisible:function(e){return"style"in e&&"none"!==e.style.display},release:function(e){for(var t=e.childNodes.length,n=0;n<t;n++)_html.release(e.childNodes[n]);t>0&&_html.clear(e),e._pool&&e._pool.release(e)},clear:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},setZoom:function(e,t){var n=e.style;if(n.setProperty)UserAgent.isFirefox?(n.setProperty("-moz-transform","scale("+t+")",null),n.setProperty("-moz-transform-origin","0 0",null)):UserAgent.isOpera&&(n.setProperty("-o-transform","scale("+t+")",null),n.setProperty("-o-transform-origin","0 0",null));else if(UserAgent.isChrome||UserAgent.isSafari){n.setProperty("-webkit-transform","scale("+t+")",null),n.setProperty("-webkit-transform-origin","0 0",null);var r=null;e._webkitInvaildateDiv?r=e._webkitInvaildateDiv:(r=document.createElement("div"),e._webkitInvaildateDiv=r),r.parentNode&&r.parentNode==e?e.removeChild(r):e.appendChild(r)}else UserAgent.isIE?(n.setProperty("-ms-transform","scale("+t+")",null),n.setProperty("-ms-transform-origin","0 0",null)):(n.setProperty("transform","scale("+t+")",null),n.setProperty("transform-origin","0 0",null))},setCSSStyle:function(e,t,n){e.style.setProperty(t,n,null)},removeCSSStyle:function(e,t){e.style.removeProperty(t)},getCSSStyle:function(e,t){return e.style.getPropertyValue(t)},setBorderRaidus:function(e,t){UserAgent.isFirefox?e.style.MozBorderRadius=t:e.style.borderRadius=t},createSelect:function(e,t){var n=document.createElement("select"),r=void 0,o=void 0,l=void 0;if(Array.isArray(e))for(r=0;r<e.length;r++)o=e[r],l=document.createElement("option"),l.innerHTML=o,l.setAttribute("value",o),o===t&&l.setAttribute("selected","true"),n.appendChild(l);else for(r=0;r<e.values.length;r++)o=e.values[r],l=document.createElement("option"),l.innerHTML=e.map[o],l.setAttribute("value",o),o===t&&l.setAttribute("selected","true"),n.appendChild(l);return n},createImg:function(e){var t=document.createElement("img");return t.style.position="absolute","string"==typeof e&&t.setAttribute("src",e),t},createView:function(e,t){var n=document.createElement("div");return n.style.position=Bd.VIEW_POSITION,n.style.fontSize=Bd.VIEW_FONT_SIZE,n.style.fontFamily=Bd.VIEW_FONT_FAMILY,n.style.cursor="default",n.style.outline="none",n.style.textAlign="left",n.style.msTouchAction="none",n.tabIndex=0,t||(n.onmousedown=_html.preventDefault),n.style.setProperty&&(n.style.setProperty("-khtml-user-select","none",null),n.style.setProperty("-webkit-user-select","none",null),n.style.setProperty("-moz-user-select","none",null),n.style.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",null)),e&&(n.style.overflow=e),n},createDiv:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.msTouchAction="none",e},createSpan:function(){var e=document.createElement("span");return e},createCanvas:function(e,t){e||(e=0),t||(t=0);var n=document.createElement("canvas");return n.style.msTouchAction="none",n.width=e,n.height=t,n},setCanvas:function(e,t,n,r,o){2===arguments.length&&(n=t.y,r=t.width,o=t.height,t=t.x),e.style.left=t+"px",e.style.top=n+"px",e.setAttribute("width",r),e.setAttribute("height",o),e._viewRect={x:t,y:n,width:r,height:o};var l=e.getContext("2d");return 0!==l.shadowBlur&&(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowBlur=0,l.shadowColor="rgba(0,0,0,0.0)"),l.clearRect(0,0,r,o),l.translate(-t,-n),l},clone:function(e){if(!e)return null;var t={};for(var n in e)t[n]=e[n];return t},num:function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},setImg:function(e,t,n){e.setAttribute("src",t),e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.width=n.width+"px",e.style.height=n.height+"px",e._viewRect=_html.clone(n)},setDiv:function(e,t,n,r,o){r=_html.num(r)?r:0,e.style.left=t.x-r+"px",e.style.top=t.y-r+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",e._viewRect=_html.clone(t),n?e.style.backgroundColor=n:e.style.backgroundColor="",r>0?e.style.border=r+"px "+o+" solid":e.style.border=""},addEventListener:function(e,t,n,r){var o="_"+e+"_";if(!r[o]){var l=function e(t){e.instance[e.method](t)};l.method=t,l.instance=r,r[o]=l,n.addEventListener(e,l,!1)}},removeEventListener:function(e,t,n){var r="_"+e+"_",o=n[r];o&&(t.removeEventListener(e,o,!1),delete n[r])},isValidEvent:function(e,t){if(!t)return!1;if(t.target===e)if(UserAgent.isFirefox){if(e.clientHeight<e.scrollHeight&&t.layerX<25)return!1;if(e.clientWidth<e.scrollWidth&&t.layerY<25)return!1}else if(t.offsetX>e.clientWidth||t.offsetY>e.clientHeight)return!1;return!0},getLogicalPoint:function(e,t,n,r){n=n?n:1;var o=void 0,l=e.getBoundingClientRect();if(UserAgent.isTouchable&&t.changedTouches&&t.changedTouches.length>0){var i=t.changedTouches[0],s=UserAgent.isAndroid?0:_touch.scrollLeft(),u=UserAgent.isAndroid?0:_touch.scrollTop();o={x:(i.clientX+e.scrollLeft-l.left-s)/n,y:(i.clientY+e.scrollTop-l.top-u)/n}}else{if(!_html.isValidEvent(e,t))return null;o={x:(t.clientX-l.left+e.scrollLeft)/n,y:(t.clientY-l.top+e.scrollTop)/n}}return o},handle_mousedown:function(e,t){_html.target&&_html.handle_mouseup(t),window.addEventListener("mousemove",_html.handle_mousemove,!1),window.addEventListener("mouseup",_html.handle_mouseup,!1),_html.target=e},handle_mousemove:function(e){_html.target.handle_mousemove&&_html.target.handle_mousemove(e),_html.target.handleMouseMove&&_html.target.handleMouseMove(e)},handle_mouseup:function(e){_html.target.handle_mouseup&&_html.target.handle_mouseup(e),_html.target.handleMouseUp&&_html.target.handleMouseUp(e),window.removeEventListener("mousemove",_html.handle_mousemove,!1),window.removeEventListener("mouseup",_html.handle_mouseup,!1),delete _html.target},getClientPoint:function(e){return{x:e.clientX,y:e.clientY}},windowWidth:function(){return"number"==typeof window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body&&document.body.clientWidth?document.body.clientWidth:0},windowHeight:function(){return"number"==typeof window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body&&document.body.clientHeight?document.body.clientHeight:0}},html=_html;module.exports=html;