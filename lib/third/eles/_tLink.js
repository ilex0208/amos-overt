var Tnode=require("./_tNode"),_con=require("./../constants/index"),Bd=_con.Bd,invokeExtends=require("./../core/_ext"),Tlink=function e(t,n,i){e.superClass.constructor.call(this,t instanceof Tnode?null:t),t instanceof Tnode&&(i=n,n=t),this.setFromNode(n),this.setToNode(i),this._fromNode=null,this._toNode=null,this._fromAgent=null,this._toAgent=null,this._icon=Bd.ICON_LINK,this.getFromNode=function(){return this._fromNode},this.getToNode=function(){return this._toNode},this.getFromAgent=function(){return this._fromAgent},this.getToAgent=function(){return this._toAgent},this.setFromNode=function(e){if(this._fromNode!==e){var t=this._fromNode;this._fromNode=e,t&&t._removeFromLink(this),this._fromNode&&this._fromNode._addFromLink(this),this._checkAgentNode(),this.firePropertyChange("fromNode",t,e)}},this.setToNode=function(e){if(this._toNode!==e){var t=this._toNode;this._toNode=e,t&&t._removeToLink(this),this._toNode&&this._toNode._addToLink(this),this._checkAgentNode(),this.firePropertyChange("toNode",t,e)}},this.isLooped=function(){return this._fromNode===this._toNode&&null!=this._fromNode&&null!=this._toNode},this._setBundleLinks=function(e){this._bundleLinks=e,this.firePropertyChange("bundleLinks",!0,!1)},this.getBundleLinks=function(){return this._bundleLinks},this.getBundleCount=function(){return this._bundleLinks?this._bundleLinks.getLinks().size():1},this.getBundleIndex=function(){return this._bundleLinks?this._bundleLinks.getLinks().indexOf(this):0},this.reverseBundleExpanded=function(){if(this._bundleLinks&&this._bundleLinks.getLinks().size()>0){var e,t,n=this._bundleLinks.getLinks(),i=!this.getStyle("link.bundle.expanded");for(e=0;e<n.size();e++)t=n.get(e),t.setStyle("link.bundle.expanded",i);var s=this._bundleLinks.getSiblings();for(e=0;e<s.size();e++){var o=s.get(e);if(o!=this._bundleLinks){n=o.getLinks();for(var d=0;d<n.size();d++)t=n.get(d),t.firePropertyChange("bundleLinks",null,o)}}return!0}return!1},this.isBundleAgent=function(){return null!=this._bundleLinks&&this._bundleLinks.getLinks().size()>1&&this===this._bundleLinks.getLinks().get(0)&&!this.getStyle("link.bundle.expanded")},this.isAdjustedToBottom=function(){return Bd.IS_LINK_ADJUSTED_TO_BOTTOM}};Tlink.IS_INTERESTED_BUNDLE_STYLE={"link.bundle.enable":1,"link.bundle.id":1,"link.bundle.independent":1},invokeExtends("third.Tlink",Element,Tlink),Tlink.prototype.getClassName=function(){return"third.Tlink"},module.exports=Tlink;