var AlarmSeverity=require("./_alarmSeverity"),invokeExtends=require("./../core/_ext"),AlarmState=function(t){this._e=t,this._nm={},this._am={},this._ps=null,this._haa=null,this._hna=null,this._hoa=null,this._hta=null,this._hls=!1,this._aac=0,this._nac=0,this._ep=!0,this._f=function(){this._c1(),this._c2(),this._c3(),this._c4(),this._c5(),this._c6(),this._c7(),this._e.firePropertyChange("alarmState",null,this)},this.getHighestAcknowledgedAlarmSeverity=function(){return this._haa},this.getHighestNewAlarmSeverity=function(){return this._hna},this.getHighestOverallAlarmSeverity=function(){return this._hoa},this.getHighestNativeAlarmSeverity=function(){return this._hta},this.hasLessSevereNewAlarms=function(){return this._hls},this._c1=function(){var t=null;for(var e in this._am)e=AlarmSeverity.getByName(e),AlarmSeverity.isClearedAlarmSeverity(e)||0!==this.getAcknowledgedAlarmCount(e)&&(t=t&&AlarmSeverity.compare(t,e)>0?t:e);this._haa=t},this._c2=function(){var t=null;for(var e in this._nm)e=AlarmSeverity.getByName(e),AlarmSeverity.isClearedAlarmSeverity(e)||0!==this.getNewAlarmCount(e)&&(t=t&&AlarmSeverity.compare(t,e)>0?t:e);this._hna=t},this._c3=function(){if(!this._hna)return void(this._hls=!1);for(var t in this._nm)if(t=AlarmSeverity.getByName(t),!AlarmSeverity.isClearedAlarmSeverity(t)&&0!==this.getNewAlarmCount(t)&&AlarmSeverity.compare(this._hna,t)>0)return void(this._hls=!0);this._hls=!1},this._c4=function(){var t=this._haa,e=this._hna,i=this._ps;this._hoa=t,AlarmSeverity.compare(e,this._hoa)>0&&(this._hoa=e),AlarmSeverity.compare(i,this._hoa)>0&&(this._hoa=i)},this._c5=function(){var t=this._haa,e=this._hna;this._hta=t,AlarmSeverity.compare(e,this._hta)>0&&(this._hta=e)},this.increaseAcknowledgedAlarm=function(t,e){if(null==e&&(e=1),0!==e){var i=this._am[t.name];null==i&&(i=0),i+=e,this._am[t.name]=i,this._f()}},this.increaseNewAlarm=function(t,e){if(null==e&&(e=1),0!==e){var i=this._nm[t.name];null==i&&(i=0),i+=e,this._nm[t.name]=i,this._f()}},this.decreaseAcknowledgedAlarm=function(t,e){if(null==e&&(e=1),0!==e){var i=this._am[t.name];if(null==i&&(i=0),i-=e,i<0)throw"Alarm count can not be negative";this._am[t.name]=i,this._f()}},this.decreaseNewAlarm=function(t,e){if(null==e&&(e=1),0!==e){var i=this._nm[t.name];if(null==i&&(i=0),i-=e,i<0)throw"Alarm count can not be negative";this._nm[t.name]=i,this._f()}},this.acknowledgeAlarm=function(t){this.decreaseNewAlarm(t,1),this.increaseAcknowledgedAlarm(t,1)},this.acknowledgeAllAlarms=function(t){if(t){var e=this.getNewAlarmCount(t);this.decreaseNewAlarm(t,e),this.increaseAcknowledgedAlarm(t,e)}else for(var i in this._nm)this.acknowledgeAllAlarms(AlarmSeverity.getByName(i))},this._c6=function(){this._aac=0;for(var t in this._am)t=AlarmSeverity.getByName(t),this._aac+=this.getAcknowledgedAlarmCount(t)},this.getAcknowledgedAlarmCount=function(t){if(t){var e=this._am[t.name];return null==e?0:e}return this._aac},this.getAlarmCount=function(t){return this.getAcknowledgedAlarmCount(t)+this.getNewAlarmCount(t)},this._c7=function(){this._nac=0;for(var t in this._nm)t=AlarmSeverity.getByName(t),this._nac+=this.getNewAlarmCount(t)},this.getNewAlarmCount=function(t){if(t){var e=this._nm[t.name];return null==e?0:e}return this._nac},this.setNewAlarmCount=function(t,e){this._nm[t.name]=e,this._f()},this.removeAllNewAlarms=function(t){t?delete this._nm[t]:this._nm={},this._f()},this.setAcknowledgedAlarmCount=function(t,e){this._am[t.name]=e,this._f()},this.removeAllAcknowledgedAlarms=function(t){t?delete this._am[t.name]:this._am={},this._f()},this.isEmpty=function(){return null==this._hoa},this.clear=function(){this._am={},this._nm={},this._f()},this.getPropagateSeverity=function(){return this._ps},this.setPropagateSeverity=function(t){if(this._ep||(t=null),this._ps!==t){var e=this._ps;this._ps=t,this._f(),this._e.firePropertyChange("propagateSeverity",e,t)}},this.isEnablePropagation=function(){return this._ep},this.setEnablePropagation=function(t){var e=this._ep;this._ep=t,this._e.firePropertyChange("enablePropagation",e,t)&&(t||this.setPropagateSeverity(null))}};invokeExtends("third.AlarmState",Object,AlarmState),AlarmState.prototype.getClassName=function(){return"third.AlarmState"},module.exports=AlarmState;