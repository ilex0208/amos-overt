var third=require("./_third"),html=third.html,UserAgent=third.UserAgent,TreePane=function(){this._view=html.createView("hidden",!0),this._view.tabIndex=-1;var i;i=UserAgent.isTouchable&&!UserAgent.isMSToucheable?TreePaneTouchInteraction:TreePaneInteraction,i&&new i(this),this.getTreeView=function(){return this._view}},TreePaneInteraction=function(i){this.treePane=i,this.view=i._view;var e=this;this.view.addEventListener("mousedown",function(i){0===i.button&&e.handleMouseDown(i)},!1),this.view.addEventListener("mousemove",function(i){e.handleMouseMove(i)},!1),this.handleMouseDown=function(i){},this.handleMouseMove=function(i){},this.handleMouseUp=function(i){},this.clear=function(i){if(this.resizeDiv){var e,t=this.treePane._dividerWidth;if("horizontal"===this.treePane._orientation){var s=this.view.clientWidth;t>s&&(t=s),e=this.dividerDiv.position+i.clientX-this.resizeDiv.lastPosition,this.treePane.setPosition(e/(s-t))}else{var h=this.view.clientHeight;t>h&&(t=h),e=this.dividerDiv.position+i.clientY-this.resizeDiv.lastPosition,this.treePane.setPosition(e/(h-t))}this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv}}},TreePaneTouchInteraction=function(i){this.treePane=i,this.view=i._view,this.dividerDiv=i._dividerDiv,html.addEventListener("touchstart","handleTouchstart",this.view,this),this.handleTouchstart=function(i){if(html.preventDefault(i),this.resizeDiv)this.clear(i);else if(i.target===this.dividerDiv||i.target===this.treePane._coverDiv){this.resizeDiv=html.createDiv();var e=this.resizeDiv.style;e.left=this.dividerDiv.style.left,e.top=this.dividerDiv.style.top,e.width=this.dividerDiv.style.width,e.height=this.dividerDiv.style.height,e.opacity=this.treePane.getDividerOpacity(),e.background=this.treePane.getDividerBackground();var t=i.changedTouches[0];this.resizeDiv.lastPosition="horizontal"===this.treePane._orientation?t.clientX:t.clientY,this.resizeDiv.maskDiv=html.createDiv();var s=this.resizeDiv.maskDiv.style;s.left="0px",s.top="0px",s.width=this.view.clientWidth+"px",s.height=this.view.clientHeight+"px",s.background=this.treePane.getMaskBackground(),this.view.appendChild(this.resizeDiv.maskDiv),this.view.appendChild(this.resizeDiv)}html.addEventListener("touchmove","handleTouchmove",this.view,this),html.addEventListener("touchend","handleTouchend",this.view,this)},this.handleTouchmove=function(i){if(html.preventDefault(i),this.resizeDiv){var e=i.changedTouches[0];"horizontal"===this.treePane._orientation?this.resizeDiv.style.left=this.dividerDiv.position+e.clientX-this.resizeDiv.lastPosition+"px":this.resizeDiv.style.top=this.dividerDiv.position+e.clientY-this.resizeDiv.lastPosition+"px"}},this.handleTouchend=function(i){html.removeEventListener("touchmove",this.view,this),html.removeEventListener("touchend",this.view,this),this.clear(i)},this.clear=function(i){var e=i.changedTouches[0];if(this.resizeDiv){var t=this.treePane._dividerWidth;if("horizontal"===this.treePane._orientation){var s=this.view.clientWidth;t>s&&(t=s);var h=this.dividerDiv.position+e.clientX-this.resizeDiv.lastPosition;this.treePane.setPosition(h/(s-t))}else{var n=this.view.clientHeight;t>n&&(t=n);var r=this.dividerDiv.position+e.clientY-this.resizeDiv.lastPosition;this.treePane.setPosition(r/(n-t))}this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv}}};module.exports=TreePane;