{"version":3,"sources":["../src/_absElement.js"],"names":["Element","initialize","elementType","serializedProperties","propertiesStack","_id","Date","getTime","distroy","removeHandler","attr","a","b","save","_self","$property","forEach","saveProperty","push","restore","length","res","pop","resProperty","toJson","result","len","val","index","pro","CanvasRenderingContext2D","prototype","AmostRoundRect","x","y","width","height","borderRadius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","AmostDashedLineTo","dashedPattern","distanceW","distanceH","hypotenuse","Math","floor","sqrt","_line","endY","endX","i","stroke","module","exports"],"mappings":"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","file":"_absElement.js","sourcesContent":["//////////////////////////////\n/**\n * 基础Element\n * @author ilex\n * @description 2016-11-04 10:56:12\n */\n//////////////////////////////\nfunction Element() {\n  this.initialize = function() {\n    this.elementType = 'element',\n      this.serializedProperties = ['elementType'],\n      this.propertiesStack = [],\n      this._id = '' + (new Date).getTime();\n  },\n    this.distroy = function() { },\n    this.removeHandler = function() { },\n    this.attr = function(a, b) {\n      if (null != a && null != b) { this[a] = b; }\n      else if (null != a) { return this[a]; }\n      return this;\n    },\n    this.save = function() {\n      let _self = this, $property = {};\n      this.serializedProperties.forEach(function(saveProperty) {\n        $property[saveProperty] = _self[saveProperty];\n      }),\n        this.propertiesStack.push($property);\n    },\n    this.restore = function() {\n      if (null != this.propertiesStack && 0 != this.propertiesStack.length) {\n        let _self = this,\n          res = this.propertiesStack.pop();\n        this.serializedProperties.forEach(function(resProperty) {\n          _self[resProperty] = res[resProperty];\n        });\n      }\n    },\n    this.toJson = function() {\n      let _self = this,\n        result = '{',\n        len = this.serializedProperties.length;\n      return this.serializedProperties.forEach(function(val, index) {\n        let pro = _self[val];\n        'string' == typeof pro && (pro = '\"' + pro + '\"'),\n          result += '\"' + val + '\":' + pro,\n          len > index + 1 && (result += ',');\n      }),\n        result += '}';\n    };\n}\n\n/**\n * 自定义rect\n *\n * @param {any} x x坐标\n * @param {any} y y坐标\n * @param {any} width 宽\n * @param {any} height 高\n * @param {any} borderRadius 默认5\n */\nCanvasRenderingContext2D.prototype.AmostRoundRect = function(x, y, width, height, borderRadius) {\n  'undefined' == typeof borderRadius && (borderRadius = 5),\n    this.beginPath(),\n    this.moveTo(x + borderRadius, y),\n    this.lineTo(x + width - borderRadius, y),\n    this.quadraticCurveTo(x + width, y, x + width, y + borderRadius),\n    this.lineTo(x + width, y + height - borderRadius),\n    this.quadraticCurveTo(x + width, y + height, x + width - borderRadius, y + height),\n    this.lineTo(x + borderRadius, y + height),\n    this.quadraticCurveTo(x, y + height, x, y + height - borderRadius),\n    this.lineTo(x, y + borderRadius),\n    this.quadraticCurveTo(x, y, x + borderRadius, y),\n    this.closePath();\n};\n\n\n/**\n * 自定义lineTo\n *\n * @param {any} x x坐标\n * @param {any} y y坐标\n * @param {any} width 宽\n * @param {any} height 高\n * @param {any} dashedPattern 默认5\n */\nCanvasRenderingContext2D.prototype.AmostDashedLineTo = function(x, y, width, height, dashedPattern) {\n  'undefined' == typeof dashedPattern && (dashedPattern = 5);\n  let distanceW = width - x,\n    distanceH = height - y,\n    hypotenuse = Math.floor(Math.sqrt(distanceW * distanceW + distanceH * distanceH)), // 平方根,计算斜边\n    _line = 0 >= dashedPattern ? hypotenuse : hypotenuse / dashedPattern,\n    endY = distanceH / hypotenuse * dashedPattern,\n    endX = distanceW / hypotenuse * dashedPattern;\n  this.beginPath();\n  for (let i = 0; i < _line; i++)\n  {\n    i % 2 ? this.lineTo(x + i * endX, y + i * endY) : this.moveTo(x + i * endX, y + i * endY);\n  }\n  this.stroke();\n};\n\nmodule.exports = Element;\n"]}