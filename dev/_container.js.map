{"version":3,"sources":["../src/_container.js"],"names":["_e","require","Tobj","_layout","InteractiveElement","Container","name","initialize","_text","prototype","apply","elementType","zIndex","zIndex_Container","width","height","childs","alpha","dragable","childDragble","visible","fillColor","borderWidth","borderColor","borderRadius","font","fontColor","text","textPosition","textOffsetX","textOffsetY","layout","AutoBoundLayout","add","node","push","remove","i","length","parentContainer","del","lastParentContainer","removeAll","setLocation","_x","_y","changeX","x","changeY","y","doLayout","fn","paint","ctx","beginPath","fillStyle","rect","AmostRoundRect","fill","closePath","paintText","paintBorder","lineWidth","strokeStyle","_bw","stroke","textW","measureText","_dw","textPos","getTextPostion","fillText","pos","textWidth","defaultWidth","paintMouseover","paintSelected","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","module","exports"],"mappings":"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","file":"_container.js","sourcesContent":["//////////////////////////////\n/**\n * 容器\n * @author ilex\n * @description 2016-11-03 11:56:12\n */\n//////////////////////////////\nconst _e = require('./_baseElement');\nconst Tobj = require('./_tobj');\nconst _layout = require('./_layout');\n\nconst InteractiveElement = _e.InteractiveElement;\n/**\n * 容器\n *\n * @param {any} name 容器名称,可以为空\n */\nfunction Container(name) {\n  this.initialize = function(_text) {\n    Container.prototype.initialize.apply(this, null),\n      this.elementType = 'container',\n      this.zIndex = Tobj.zIndex_Container,\n      this.width = 100,\n      this.height = 100,\n      this.childs = [],\n      this.alpha = 0.5,\n      this.dragable = true,\n      this.childDragble = true,\n      this.visible = true,\n      this.fillColor = '10,100,80',\n      this.borderWidth = 0,\n      this.borderColor = '255,255,255',\n      this.borderRadius = null,\n      this.font = '12px Consolas',\n      this.fontColor = '255,255,255',\n      this.text = _text,\n      this.textPosition = 'Bottom_Center',\n      this.textOffsetX = 0,\n      this.textOffsetY = 0,\n      this.layout = new _layout.AutoBoundLayout;\n  },\n    this.initialize(name),\n    this.add = function(node) {\n      this.childs.push(node),\n        node.dragable = this.childDragble;\n    },\n    this.remove = function(node) {\n      for (let i = 0; i < this.childs.length; i++) {\n        if (this.childs[i] === node) {\n          node.parentContainer = null,\n            this.childs = this.childs.del(i),\n            node.lastParentContainer = this;\n          break;\n        }\n      }\n    },\n    this.removeAll = function() {\n      this.childs = [];\n    },\n    this.setLocation = function(_x, _y) {\n      let changeX = _x - this.x,\n        changeY = _y - this.y;\n      this.x = _x,\n        this.y = _y;\n      for (let i = 0; i < this.childs.length; i++) {\n        let node = this.childs[i];\n        node.setLocation(node.x + changeX, node.y + changeY);\n      }\n    },\n    this.doLayout = function(fn) {\n      fn && fn(this, this.childs);\n    },\n    this.paint = function(ctx) {\n      this.visible && (this.layout && this.layout(this, this.childs), ctx.beginPath(), ctx.fillStyle = 'rgba(' + this.fillColor + ',' + this.alpha + ')', null == this.borderRadius || 0 == this.borderRadius ? ctx.rect(this.x, this.y, this.width, this.height) : ctx.AmostRoundRect(this.x, this.y, this.width, this.height, this.borderRadius), ctx.fill(), ctx.closePath(), this.paintText(ctx), this.paintBorder(ctx));\n    },\n    this.paintBorder = function(ctx) {\n      if (this.borderWidth != 0) {\n        ctx.beginPath(),\n          ctx.lineWidth = this.borderWidth,\n          ctx.strokeStyle = 'rgba(' + this.borderColor + ',' + this.alpha + ')';\n        let _bw = this.borderWidth / 2;\n        null == this.borderRadius || 0 == this.borderRadius ? ctx.rect(this.x - _bw, this.y - _bw, this.width + this.borderWidth, this.height + this.borderWidth) : ctx.AmostRoundRect(this.x - _bw, this.y - _bw, this.width + this.borderWidth, this.height + this.borderWidth, this.borderRadius),\n          ctx.stroke(),\n          ctx.closePath();\n      }\n    },\n    this.paintText = function(ctx) {\n      let _text = this.text;\n      if (null != _text && '' != _text) {\n        ctx.beginPath(),\n          ctx.font = this.font;\n        let textW = ctx.measureText(_text).width,\n          _dw = ctx.measureText('田').width;\n        ctx.fillStyle = 'rgba(' + this.fontColor + ', ' + this.alpha + ')';\n        let textPos = this.getTextPostion(this.textPosition, textW, _dw);\n        ctx.fillText(_text, textPos.x, textPos.y),\n          ctx.closePath();\n      }\n    },\n    this.getTextPostion = function(pos, textWidth, defaultWidth) {\n      let textPos = null;\n      return null == pos || 'Bottom_Center' == pos ? textPos = {\n        x: this.x + this.width / 2 - textWidth / 2,\n        y: this.y + this.height + defaultWidth\n      } : 'Top_Center' == pos ? textPos = {\n        x: this.x + this.width / 2 - textWidth / 2,\n        y: this.y - defaultWidth / 2\n      } : 'Top_Right' == pos ? textPos = {\n        x: this.x + this.width - textWidth,\n        y: this.y - defaultWidth / 2\n      } : 'Top_Left' == pos ? textPos = {\n        x: this.x,\n        y: this.y - defaultWidth / 2\n      } : 'Bottom_Right' == pos ? textPos = {\n        x: this.x + this.width - textWidth,\n        y: this.y + this.height + defaultWidth\n      } : 'Bottom_Left' == pos ? textPos = {\n        x: this.x,\n        y: this.y + this.height + defaultWidth\n      } : 'Middle_Center' == pos ? textPos = {\n        x: this.x + this.width / 2 - textWidth / 2,\n        y: this.y + this.height / 2 + defaultWidth / 2\n      } : 'Middle_Right' == pos ? textPos = {\n        x: this.x + this.width - textWidth,\n        y: this.y + this.height / 2 + defaultWidth / 2\n      } : 'Middle_Left' == pos && (textPos = {\n        x: this.x,\n        y: this.y + this.height / 2 + defaultWidth / 2\n      }),\n        null != this.textOffsetX && (textPos.x += this.textOffsetX),\n        null != this.textOffsetY && (textPos.y += this.textOffsetY),\n        textPos;\n    },\n    this.paintMouseover = function() { },\n    this.paintSelected = function(ctx) {\n      ctx.shadowBlur = 10; // 设置或返回用于阴影的模糊级别\n      ctx.shadowColor = 'rgba(0,0,0,1)'; // 设置或返回用于阴影的颜色\n      ctx.shadowOffsetX = 0; // 设置或返回阴影距形状的水平距离\n      ctx.shadowOffsetY = 0; // 设置或返回阴影距形状的垂直距离\n    };\n}\nContainer.prototype = new InteractiveElement;\n\n// 单独导出\nmodule.exports = Container;\n"]}